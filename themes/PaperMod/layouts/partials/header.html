<header class="header" id="siteHeader">
  <div class="nav container">

    <!-- Logo -->
    <div class="logo">
      <a href="{{ "/" | relURL }}">{{ .Site.Title }}</a>
    </div>

    <!-- Desktop / Mobile Menu -->
    <ul class="menu" id="mainMenu">
      <li><a href="/" class="nav-link">خانه</a></li>
      <li><a href="/posts/" class="nav-link">مقالات</a></li>
      <li><a href="/about/" class="nav-link">درباره من</a></li>
      <li><a href="/coffee/" class="nav-link">تماس</a></li>
    </ul>

    <!-- Hamburger -->
    <div class="mobile-toggle" id="mobileToggle">
      <span></span>
      <span></span>
      <span></span>
    </div>

  </div>
</header>

<div class="menu-overlay" id="menuOverlay"></div>

<script>
document.addEventListener("DOMContentLoaded", function () {

  const header = document.getElementById("siteHeader");
  const toggle = document.getElementById("mobileToggle");
  const menu = document.getElementById("mainMenu");
  const overlay = document.getElementById("menuOverlay");
  const body = document.body;
  const links = document.querySelectorAll(".nav-link");

  /* ===== Scroll Shrink ===== */
  window.addEventListener("scroll", () => {
    if (window.scrollY > 40) {
      header.classList.add("scrolled");
    } else {
      header.classList.remove("scrolled");
    }
  });

  /* ===== Active Link ===== */
  const current = window.location.pathname;
  links.forEach(link => {
    if (current === link.getAttribute("href")) {
      link.classList.add("active");
    }
  });

  /* ===== Mobile Toggle ===== */
  toggle.addEventListener("click", () => {
    toggle.classList.toggle("active");
    menu.classList.toggle("mobile-open");
    overlay.classList.toggle("show");
    body.classList.toggle("menu-lock");

    // stagger animation
    document.querySelectorAll(".menu li").forEach((item, index) => {
      item.style.transitionDelay = menu.classList.contains("mobile-open")
        ? (index * 0.07) + "s"
        : "0s";
    });
  });

  overlay.addEventListener("click", () => {
    toggle.classList.remove("active");
    menu.classList.remove("mobile-open");
    overlay.classList.remove("show");
    body.classList.remove("menu-lock");
  });

});
</script>
