<script>
document.addEventListener("DOMContentLoaded", function() {
    const menuTrigger = document.getElementById("menu-trigger");
    const menu = document.getElementById("menu");
    const body = document.body;

    if (menuTrigger && menu) {
        // تابع باز و بسته کردن منو
        function toggleMenu() {
            const isOpen = menu.classList.contains("open");
            
            if (isOpen) {
                // بستن منو
                menu.classList.remove("open");
                menuTrigger.classList.remove("is-active");
                body.classList.remove("menu-open");
            } else {
                // باز کردن منو
                menu.classList.add("open");
                menuTrigger.classList.add("is-active");
                body.classList.add("menu-open");
            }
        }

        // کلیک روی دکمه همبرگری
        menuTrigger.addEventListener("click", function(e) {
            e.stopPropagation(); // جلوگیری از بسته شدن فوری
            toggleMenu();
        });

        // کلیک بیرون از منو برای بستن آن
        document.addEventListener("click", function(e) {
            const isClickInsideMenu = menu.contains(e.target);
            const isClickOnBtn = menuTrigger.contains(e.target);

            // اگر منو باز است و کاربر بیرون آن کلیک کرد
            if (menu.classList.contains("open") && !isClickInsideMenu && !isClickOnBtn) {
                toggleMenu();
            }
        });

        // بستن منو وقتی روی یک لینک کلیک می‌شود (برای تجربه کاربری بهتر)
        menu.querySelectorAll("a").forEach(link => {
            link.addEventListener("click", () => {
                if (window.innerWidth <= 768) {
                    toggleMenu();
                }
            });
        });
    }
});
</script>